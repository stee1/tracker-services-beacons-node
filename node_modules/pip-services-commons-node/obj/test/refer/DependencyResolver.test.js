"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var assert = require('chai').assert;
var References_1 = require("../../src/refer/References");
var DependencyResolver_1 = require("../../src/refer/DependencyResolver");
var Descriptor_1 = require("../../src/refer/Descriptor");
var ConfigParams_1 = require("../../src/config/ConfigParams");
suite('DependencyResolver', function () {
    test('Resolve depedencies', function () {
        var ref1 = {};
        var ref2 = {};
        var refs = References_1.References.fromTuples("Reference1", ref1, new Descriptor_1.Descriptor("pip-services-commons", "reference", "object", "ref2", "1.0"), ref2);
        var resolver = DependencyResolver_1.DependencyResolver.fromTuples("ref1", "Reference1", "ref2", new Descriptor_1.Descriptor("pip-services-commons", "reference", "*", "*", "*"));
        resolver.setReferences(refs);
        assert.equal(ref1, resolver.getOneRequired("ref1"));
        assert.equal(ref2, resolver.getOneRequired("ref2"));
        assert.isNull(resolver.getOneOptional("ref3"));
    });
    test('Configure depedencies', function () {
        var ref1 = {};
        var ref2 = {};
        var refs = References_1.References.fromTuples("Reference1", ref1, new Descriptor_1.Descriptor("pip-services-commons", "reference", "object", "ref2", "1.0"), ref2);
        var config = ConfigParams_1.ConfigParams.fromTuples("dependencies.ref1", "Reference1", "dependencies.ref2", "pip-services-commons:reference:*:*:*", "dependencies.ref3", null);
        var resolver = new DependencyResolver_1.DependencyResolver(config);
        resolver.setReferences(refs);
        assert.equal(ref1, resolver.getOneRequired("ref1"));
        assert.equal(ref2, resolver.getOneRequired("ref2"));
        assert.isNull(resolver.getOneOptional("ref3"));
    });
});
//# sourceMappingURL=DependencyResolver.test.js.map